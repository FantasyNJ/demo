<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>拖拽</title>
<style>
#div1{width:100px;height:100px;background:red;position:absolute;}
</style>
</head>
<body>
<div id="div1"></div>
<!-- 拖拽时有文字被选中会有问题 -->
<script>
var oDiv=document.getElementById('div1');
oDiv.onmousedown=function(ev){
	var ev=ev||event;
	var disX=ev.clientX-this.offsetLeft;
	var disY=ev.clientY-this.offsetTop;
	if(oDiv.setCapture){ 
		oDiv.setCapture();
	}
	document.onmousemove=function(ev){
		var ev=ev||event;
		var L=ev.clientX-disX;
		var T=ev.clientY-disY;
		console.log(L+','+oDiv.offsetLeft);
		if(L<50){
			L=0;
		}else if(L>document.documentElement.clientWidth-oDiv.offsetWidth-50){
			L=document.documentElement.clientWidth-oDiv.offsetWidth;
		}
		if(T<50){
			T=0;
		}else if(T>document.documentElement.clientHeight-oDiv.offsetHeight-50){
			T=document.documentElement.clientHeight-oDiv.offsetHeight;
		}
		oDiv.style.left=L+'px';
		oDiv.style.top=T+'px';	
	}
	document.onmouseup=function(){
		document.onmousemove=null;
		if(oDiv.releaseCapture){ 
			oDiv.releaseCapture();
		}
	}
	return false;
}

</script>
</body>
</html>